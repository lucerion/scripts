#!/usr/bin/env sh

USAGE="Usage: add_path path/to/dir..."

CURRENT_SHELL=$(basename $SHELL)

([ -z "$1" ] || [ ! -d "$1" ]) && echo $USAGE && exit

case $CURRENT_SHELL in
  zsh)
    SHELL_CONFIG="$HOME/.zshrc"
  ;;
  bash)
    SHELL_CONFIG="$HOME/.bashrc"
  ;;
  *)
    [ -z "$SHELL_CONFIG" ] && echo "'$CURRENT_SHELL' is not supported" && exit
    [ ! -f "$SHELL_CONFIG" ] && echo "'$SHELL_CONFIG' not found" && exit
  ;;
esac

for path in $@; do
  echo "$path" |
  sed "s|~|$HOME|" |
  sed "s|$HOME|\$PATH:\$HOME|" |
  xargs -I {} echo "export PATH=\"{}\"" >> $SHELL_CONFIG
done
